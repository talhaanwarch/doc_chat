# How to do migrations

After adding new columns do following in databse

1. Make sure you have Alembic installed. If not, run the following command to install it:
   ```
   pip install alembic
   ```

2. Initialize Alembic in your project directory by executing the following command:
   ```
   alembic init alembic
   ```

   This will create an `alembic` directory with the necessary configuration files.

3. Open the newly created `alembic.ini` file and update the `sqlalchemy.url` value to match your PostgreSQL connection string:
   ```
   sqlalchemy.url = postgresql://postgres:talha1234@localhost:5432/sparkdb
   ```

4. In the `alembic/env.py` file, make the following changes:

   ```python
   target_metadata = None
   target_metadata = Base.metadata
   ```

5. Generate a new migration script by running the following command:
   ```
   alembic revision --autogenerate -m "Added new columns to querydb table"
   ```

   This command will generate a migration script that captures the necessary changes based on the differences between your current models and the database schema.


9. Apply the migration to your database by executing the following command:
   ```
   alembic upgrade head
   ```

   This command will apply the pending migrations and update the database schema to include the new columns.

After following these steps, your PostgreSQL database should have the `querydb` table with the newly added columns.